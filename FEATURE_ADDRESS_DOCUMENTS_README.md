# ุฅุถุงูุฉ ุญููู ุงูุนููุงู ูุงููุซุงุฆู ูููุณุชุฎุฏููู ูุงููุณุชุฃุฌุฑูู

## ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅุถุงูุฉ ุญูููู ุฌุฏูุฏูู ููู ูู **ุงููุณุชุฎุฏููู (Users)** ู**ุงููุณุชุฃุฌุฑูู (Tenants)**:
1. **ุงูุนููุงู ุงููุงูู** (ุญูู ูุตู)
2. **ุงููุซุงุฆู** (ุฑูุน ุญุฏ ุฃูุตู 3 ุตูุฑ)

---

## ๐ฏ ุงูุญููู ุงููุถุงูุฉ

### ูููุณุชุฎุฏู (User):
```python
address = models.TextField(blank=True, verbose_name='ุงูุนููุงู ุงููุงูู')
documents = models.JSONField(default=list, blank=True, verbose_name='ุงููุซุงุฆู')
```

### ูููุณุชุฃุฌุฑ (Tenant):
```python
address = models.TextField(blank=True, verbose_name='ุงูุนููุงู ุงููุงูู')
documents = models.JSONField(default=list, blank=True, verbose_name='ุงููุซุงุฆู')
```

---

## ๐ง ุงูุชุนุฏููุงุช ุงููุทุจูุฉ

### 1. Backend (Django)

#### โ ุงูููุฏููุงุช (Models)
- **ููู:** `djangoo/apps/users/models.py`
  - ุฃุถูู `address` ู `documents`
  
- **ููู:** `djangoo/apps/tenancy/models.py`
  - ุฃุถูู `address` ู `documents`

#### โ Django Admin
- **ููู:** `djangoo/apps/tenancy/admin.py`
  - ุฃุถููุช ุงูุญููู ุงูุฌุฏูุฏุฉ ูู `fieldsets`
  - ุฃุถูู `address` ูู `search_fields`

#### โ API Serializers
- **ููู:** `djangoo/apps/users/serializers.py`
  - ุฃุถูู `address` ู `documents` ูู `AdminUserSerializer`

#### โ API Views
- **ููู:** `djangoo/apps/users/views.py`
  - ุฃุถูู ุฏุนู `address` ูู endpoint ุงูุชุนุฏูู (PUT)
  - ุฃุถูู `address` ู `documents` ูู `_user_detail_payload`
  - **Endpoint ุฌุฏูุฏ:** `upload_user_document` - ุฑูุน ูุซููุฉ (ุตูุฑุฉ)
  - **Endpoint ุฌุฏูุฏ:** `delete_user_document` - ุญุฐู ูุซููุฉ

#### โ API URLs
- **ููู:** `djangoo/apps/users/urls.py`
  - `POST /api-dj/users/documents/upload` - ุฑูุน ูุซููุฉ
  - `DELETE /api-dj/users/{user_id}/documents/delete` - ุญุฐู ูุซููุฉ

---

### 2. ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database)

#### โ๏ธ SQL Script (ูุฌุจ ุชูููุฐู ูุฏููุงู)
**ููู:** `djangoo/ADD_ADDRESS_DOCUMENTS_FIELDS.sql`

```sql
-- ูุฌุจ ุชูููุฐู ูู ูุจู ูุณุชุฎุฏู ูู ุตูุงุญูุงุช ูุงููุฉ
ALTER TABLE dj_tenants 
ADD COLUMN IF NOT EXISTS address TEXT DEFAULT '' NOT NULL,
ADD COLUMN IF NOT EXISTS documents JSONB DEFAULT '[]'::jsonb NOT NULL;

ALTER TABLE dj_users 
ADD COLUMN IF NOT EXISTS address TEXT DEFAULT '' NOT NULL,
ADD COLUMN IF NOT EXISTS documents JSONB DEFAULT '[]'::jsonb NOT NULL;
```

**ุทุฑููุฉ ุงูุชูููุฐ:**
```bash
# ุงูุทุฑููุฉ 1: ูู psql
psql -U postgres -d your_database_name -f djangoo/ADD_ADDRESS_DOCUMENTS_FIELDS.sql

# ุงูุทุฑููุฉ 2: ูู pgAdmin
# ุงูุณุฎ ูุญุชูู ุงูููู ูุฃูุตูู ูู Query Tool ุซู Run
```

---

### 3. Frontend (React/Next.js)

#### โ ุตูุญุฉ ุชุนุฏูู ุงููุณุชุฎุฏู
- **ููู:** `frontend/src/app/admin/users/[id]/page.tsx`

**ุงููููุฒุงุช ุงููุถุงูุฉ:**
1. **ุญูู ุงูุนููุงู:**
   - Textarea ูุฅุฏุฎุงู ุงูุนููุงู ุงููุงูู
   - ููุญูุธ ูุน ุจููุฉ ุงูุจูุงูุงุช ุนูุฏ ุงูุถุบุท ุนูู "ุญูุธ"

2. **ุฑูุน ุงููุซุงุฆู:**
   - ุฑูุน ุญุฏ ุฃูุตู 3 ุตูุฑ
   - ุฃููุงุน ุงููููุงุช ุงููุฏุนููุฉ: JPG, PNG, GIF, WebP
   - ูุนุงููุฉ ุงูุตูุฑ ุงููุฑููุนุฉ
   - ุฒุฑ ุญุฐู ููู ุตูุฑุฉ

---

## ๐ก API Endpoints

### ุฑูุน ูุซููุฉ
```http
POST /api-dj/users/documents/upload
Content-Type: multipart/form-data

Body:
- file: [ุงูููู]
- userId: [ูุนุฑู ุงููุณุชุฎุฏู]

Response:
{
  "url": "http://example.com/media/documents/users/filename.jpg",
  "documents": ["url1", "url2", ...]
}
```

### ุญุฐู ูุซููุฉ
```http
DELETE /api-dj/users/{user_id}/documents/delete
Content-Type: application/json

Body:
{
  "documentUrl": "http://example.com/media/documents/users/filename.jpg"
}

Response:
{
  "documents": ["url1", ...]
}
```

### ุชุญุฏูุซ ุจูุงูุงุช ุงููุณุชุฎุฏู (ูุดูู ุงูุนููุงู)
```http
PUT /api-dj/users/{user_id}
Content-Type: application/json

Body:
{
  "fullName": "...",
  "username": "...",
  "address": "ุงูุนููุงู ุงููุงูู ููุง",
  ...
}
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู (UI)

### ูู ุตูุญุฉ ุชุนุฏูู ุงููุณุชุฎุฏู (`/admin/users/{id}`):

#### ุญูู ุงูุนููุงู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุนููุงู ุงููุงูู                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ [ูุต ูุชุนุฏุฏ ุงูุฃุณุทุฑ]              โ
โ                                 โ
โ                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ูุณู ุงููุซุงุฆู:
```
ุงููุซุงุฆู (ุญุฏ ุฃูุตู 3 ุตูุฑ)
โโโโโโโโโโโ โโโโโโโโโโโ โโโโโโโโโโโ
โ  ุตูุฑุฉ 1 โ โ  ุตูุฑุฉ 2 โ โ  ุตูุฑุฉ 3 โ
โ    โ    โ โ    โ    โ โ    โ    โ
โโโโโโโโโโโ โโโโโโโโโโโ โโโโโโโโโโโ

[๐ ุฑูุน ูุซููุฉ]

ุงููููุงุช ุงููุฏุนููุฉ: JPG, PNG, GIF, WebP
```

---

## โ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ

### 1. ุชูููุฐ SQL Script
```bash
cd djangoo
psql -U your_superuser -d your_database -f ADD_ADDRESS_DOCUMENTS_FIELDS.sql
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู Django
```bash
cd djangoo
.\.venv\Scripts\Activate.ps1
python manage.py runserver
```

### 3. ุงุฎุชุจุงุฑ ูู Frontend

#### ูู ููุญุฉ ุชุญูู ุงููุณุชุฃุฌุฑ:
1. ุงูุชูู ุฅูู `/admin/users`
2. ุงุฎุชุฑ ูุณุชุฎุฏู ูุงุถุบุท "ุชุนุฏูู"
3. **ุฃุฏุฎู ุนููุงูุงู** ูู ุญูู "ุงูุนููุงู ุงููุงูู"
4. **ุงุฑูุน ุตูุฑุฉ** (ุญุฏ ุฃูุตู 3)
5. ุงุญูุธ ุงูุชุบููุฑุงุช
6. ุชุญูู ูู ุญูุธ ุงูุจูุงูุงุช ุจุฅุนุงุฏุฉ ูุชุญ ุงูุตูุญุฉ

#### ูู Django Admin:
1. ุงูุชูู ุฅูู `/admin/tenancy/tenant/`
2. ุงุฎุชุฑ ูุณุชุฃุฌุฑ
3. ุงูุชุญ ูุณู "ุงูุนููุงู ูุงููุซุงุฆู"
4. ุฃุฏุฎู ุงูุนููุงู ูุงููุซุงุฆู (ูุฏููุงู - ูู JSON)

---

## ๐ ูููู ุงููููุงุช ุงููุนุฏูุฉ

```
djangoo/
โโโ apps/
โ   โโโ tenancy/
โ   โ   โโโ models.py           โ ุชู ุงูุชุนุฏูู
โ   โ   โโโ admin.py            โ ุชู ุงูุชุนุฏูู
โ   โโโ users/
โ   โ   โโโ models.py           โ ุชู ุงูุชุนุฏูู
โ   โ   โโโ serializers.py      โ ุชู ุงูุชุนุฏูู
โ   โ   โโโ views.py            โ ุชู ุงูุชุนุฏูู
โ   โ   โโโ urls.py             โ ุชู ุงูุชุนุฏูู
โโโ ADD_ADDRESS_DOCUMENTS_FIELDS.sql   โ ุฌุฏูุฏ

frontend/
โโโ src/
    โโโ app/
        โโโ admin/
            โโโ users/
                โโโ [id]/
                    โโโ page.tsx    โ ุชู ุงูุชุนุฏูู
```

---

## ๐ ุงูุฃูุงู ูุงูุชุญูู

### Backend:
- โ ุงูุชุญูู ูู ููุน ุงูููู (ุตูุฑ ููุท)
- โ ุงูุชุญูู ูู ุนุฏุฏ ุงููุซุงุฆู (ุญุฏ ุฃูุตู 3)
- โ ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู (IsAuthenticated)
- โ ุงูุชุญูู ูู tenant_id

### Frontend:
- โ ุชุนุทูู ุฒุฑ ุงูุฑูุน ุนูุฏ ุงููุตูู ููุญุฏ ุงูุฃูุตู
- โ ุฑุณุงูุฉ ุชุฃููุฏ ุนูุฏ ุงูุญุฐู
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุนุฑุถ ุฑุณุงุฆู ูุงุถุญุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุตูุฑ ุชูุฎุฒู ูู:** `media/documents/users/`
2. **ุญูู documents ูุฎุฒู:** ุฑูุงุจุท ุงูุตูุฑ ูู JSON Array
3. **ุงูุญุฏ ุงูุฃูุตู:** 3 ุตูุฑ ููู ูุณุชุฎุฏู
4. **ูุฌุจ ุชูููุฐ SQL Script ูุฏููุงู** ุจุณุจุจ ุตูุงุญูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
5. **ุงูุญููู ุงุฎุชูุงุฑูุฉ** (blank=True) - ูู ุชุณุจุจ ุฃุฎุทุงุก ููุจูุงูุงุช ุงูููุฌูุฏุฉ

---

## ๐ ุงูุชูู!

ุชู ุฅุถุงูุฉ ูู ุงููุชุทูุจุงุช ุจูุฌุงุญ:
- โ ุญูู ุงูุนููุงู ูููุณุชุฎุฏู ูุงููุณุชุฃุฌุฑ
- โ ุฑูุน 3 ูุซุงุฆู (ุตูุฑ) ูููุณุชุฎุฏู
- โ ุนุฑุถ ูุญุฐู ุงููุซุงุฆู
- โ ุชุญุฏูุซ Django Admin
- โ ุชุญุฏูุซ API
- โ ุชุญุฏูุซ Frontend

**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุชูููุฐ SQL Script ูุงูุงุฎุชุจุงุฑ!
