# ๐งช ุชุนูููุงุช ุงูุงุฎุชุจุงุฑ - ุงูุชูุฌูู ุงูุชููุงุฆู

## โ๏ธ ููุงุญุธุฉ ูููุฉ ุฌุฏุงู

ุงูููุฏ ุงูุฐู ุฃุถููุงู ูุนูู ููุท ุนูุฏ **ุฅูุดุงุก ุทูุจุงุช ุฌุฏูุฏุฉ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูููุงุฆู**!

**ุงูุทูุจุงุช ุงูููุฌูุฏุฉ ุญุงููุงู** ูู `/admin/orders/` ุฑุจูุง ุชู ุฅูุดุงุคูุง ูู:
1. Backend ุงููุฏูู (NestJS) - ูุจู ุงูุชุญุฏูุซ
2. ูุจู ุฅุถุงูุฉ ููุฏ auto-dispatch

โ **ุฎุทุฃ ุดุงุฆุน**: ุงููุธุฑ ุฅูู ุทูุจุงุช ูุฏููุฉ ูุชููุน ุฃู ุชูุฑุณู ุชููุงุฆูุงู!

---

## โ ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงูุตุญูุญุฉ

### 1๏ธโฃ ุชุฃูุฏ ุฃู djangoo server ูุนูู
```bash
cd f:\watan\djangoo
python manage.py runserver
```

### 2๏ธโฃ ุงูุชุญ Terminal ูุฑุงูุจ ุงูู logs
ุงุญุชูุธ ุจูุงูุฐุฉ Terminal ูุฑุฆูุฉ ูุชุฑู ุฑุณุงุฆู auto-dispatch

### 3๏ธโฃ **ุณุฌูู ุฏุฎูู ููุณุชุฎุฏู ุนุงุฏู** (ููุณ ุฃุฏูู!)
- ุงุฐูุจ ุฅูู: `http://alsham.localhost:3000/`
- ุณุฌูู ุฏุฎูู ุจุญุณุงุจ ูุณุชุฎุฏู ุนุงุฏู

### 4๏ธโฃ ุงุฎุชุฑ ููุชุฌ PUBG Global 60
- ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูููุชุฌุงุช
- ุงุฎุชุฑ ุจุงูุฉ PUBG Global 60
- ุงููุฃ ุงูุจูุงูุงุช ุงููุทููุจุฉ (User ID, etc.)

### 5๏ธโฃ ุฃุฑุณู ุงูุทูุจ
**ุงุถุบุท ุนูู ุฒุฑ "ุดุญู" ุฃู "ุฅูุดุงุก ุทูุจ"**

### 6๏ธโฃ ุฑุงูุจ Terminal ููุฑุงู!
ูุฌุจ ุฃู ุชุฑู ุฑุณุงุฆู ูุซู:

```
================================================================================
๐ AUTO-DISPATCH START: Order ID = abc-123...
================================================================================

๐ฆ Step 1: Fetching order...
   โ Order found: abc-123...

๐ Attempting auto-dispatch for order: abc-123...

โ๏ธ Step 4: Loading PackageRouting configuration...
   โ PackageRouting found!
   - Mode: auto
   - Provider Type: external

... (ุจุงูู ุงูุฑุณุงุฆู)

๐ Step 11: SENDING ORDER TO PROVIDER...
   ๐ก Calling adapter.place_order()...
   โ Provider responded!

โ AUTO-DISPATCH SUCCESS!
```

### 7๏ธโฃ ุชุญูู ูู ุงูุทูุจ ูู `/admin/orders/`
- ุณุฌูู ุฏุฎูู ูุฃุฏูู
- ุงุฐูุจ ุฅูู `/admin/orders/`
- ุงุจุญุซ ุนู **ุขุฎุฑ ุทูุจ** (ุงูุฃุญุฏุซ)
- ูุฌุจ ุฃู ุชุฌุฏ:
  - โ Provider ID: ูุญุฏุฏ (znet UUID)
  - โ External Order ID: ูุญุฏุฏ
  - โ Status: sent ุฃู processing
  - โ API: znet (ูููุณ manual)

---

## ๐ ูุงุฐุง ูู ูู ุชุธูุฑ ุฑุณุงุฆู auto-dispatchุ

### ุงูุณุจุจ 1: ุงูุทูุจ ูู ูููุดุฃ ูู djangoo
**ุงูุญู**: ุชุฃูุฏ ุฃูู ุชูุดุฆ ุงูุทูุจ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูููุงุฆู (ูููุณ ูู ููุญุฉ ุงูุฃุฏูู)

### ุงูุณุจุจ 2: ุงูุทูุจ ูููุดุฃ ูู backend ุงููุฏูู
**ุงูุญู**: ุชุฃูุฏ ุฃู Frontend ูุณุชุฎุฏู `/api-dj/orders` ูููุณ `/api/orders` ุงููุฏูู

**ููู ุชุชุญููุ**
ุงูุชุญ Developer Tools ูู ุงููุชุตูุญ โ Network tab โ ุฃุฑุณู ุทูุจ โ ุงุจุญุซ ุนู request:
- โ ูุฌุจ ุฃู ุชุฑู: `POST /api-dj/orders`
- โ ุฅุฐุง ุฑุฃูุช: `POST /api/orders` ููุฐุง ูุฐูุจ ููู backend ุงููุฏูู!

### ุงูุณุจุจ 3: ุฎุทุฃ ูู ุงูููุฏ
ุงุฑุฌุน ููู Terminal ูุงุจุญุซ ุนู ุฃุฎุทุงุก Python/Django

---

## ๐ Checklist ูุจู ุงูุงุฎุชุจุงุฑ

ูุจู ุฅูุดุงุก ุทูุจ ุฌุฏูุฏุ ุชุฃูุฏ ูู:

### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] `package_routing` ููุฌูุฏ ููุจุงูุฉ
  - mode = 'auto'
  - providerType = 'external'
  - primaryProviderId = <znet-integration-uuid>

- [ ] `package_mapping` ููุฌูุฏ
  - our_package_id = <pubg-60-package-id>
  - provider_api_id = <znet-integration-uuid>
  - provider_package_id = <znet-external-id>

- [ ] `integrations` ููุฌูุฏ
  - provider = 'znet'
  - kod ู sifre ูุญุฏุฏุงู
  - base_url ูุญุฏุฏ

### ูู ุงูููุฏ
- [ ] djangoo server ูุนูู
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก syntax ูู services.py
- [ ] Terminal ูุฑุฆู ูุฑุคูุฉ ุงูู logs

### ูู Frontend
- [ ] ุงูุทูุจ ููุฑุณู ุฅูู `/api-dj/orders` (ูููุณ `/api/orders`)

---

## ๐ฏ ุณููุงุฑูู ุงุฎุชุจุงุฑ ูุงูู

```bash
# 1. ุดุบูู djangoo
cd f:\watan\djangoo
python manage.py runserver

# 2. ูู ูุชุตูุญ ุฌุฏูุฏ:
# - ุงูุชุญ http://alsham.localhost:3000/
# - ุณุฌูู ุฏุฎูู ููุณุชุฎุฏู ุนุงุฏู
# - ุงุฐูุจ ูุตูุญุฉ PUBG Global 60
# - ุงููุฃ ุงูุจูุงูุงุช
# - ุงุถุบุท "ุดุญู"

# 3. ุฑุงูุจ Terminal ููุฑุงู!
# ูุฌุจ ุฃู ุชุฑู:
# ๐ AUTO-DISPATCH START: Order ID = ...
# ๐ฆ Step 1: Fetching order...
# ...
# โ AUTO-DISPATCH SUCCESS!

# 4. ุชุญูู ูู ุงูุทูุจ:
# - ุณุฌูู ุฏุฎูู ูุฃุฏูู
# - ุงูุชุญ /admin/orders/
# - ุงุจุญุซ ุนู ุขุฎุฑ ุทูุจ
# - ุชุฃูุฏ ูู ูุฌูุฏ Provider ID ู External Order ID
```

---

## ๐ ุฅุฐุง ูู ูุนูู

### 1. ูู ุชุธูุฑ ุฃู ุฑุณุงุฆู auto-dispatch
โ ุงูุทูุจ ูู ูููุดุฃ ูู djangooุ ุชุญูู ูู Frontend

### 2. ุธูุฑุช ุฑุณุงุฆู ููู ุชูููุช ุนูุฏ "No PackageRouting"
โ ุฃุถู PackageRouting ูู `/admin/products/package-routing/`

### 3. ุธูุฑุช ุฑุณุงุฆู ููู "No PackageMapping found"
โ ุงุฑุจุท ุงูุจุงูุฉ ูุน ุงููุฒูุฏ ูู Integration โ Package Mappings

### 4. ูุตูุช ูู "SENDING ORDER TO PROVIDER" ููู ูุดู
โ ุฑุงุฌุน error message ูู traceback
โ ุชุญูู ูู ุตุญุฉ ุจูุงูุงุช znet (kod/sifre/baseUrl)

---

## ๐ธ ููุทุงุช ุดุงุดุฉ ูุทููุจุฉ ููุชุญูู

1. **Terminal** ุฃุซูุงุก ุฅูุดุงุก ุงูุทูุจ (ูุฌุจ ุฃู ูุธูุฑ auto-dispatch logs)
2. **Network tab** ูู DevTools (ูุฌุจ POST `/api-dj/orders`)
3. **Order details** ูู `/admin/orders/` (ูุฌุจ ุฃู ูุธูุฑ Provider ID)

---

**โ ุงูุขู ุฌุฑูุจ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ ูุฃุฎุจุฑูู ุจุงููุชูุฌุฉ!**
