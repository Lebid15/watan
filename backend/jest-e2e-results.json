{"numFailedTestSuites":1,"numFailedTests":2,"numPassedTestSuites":10,"numPassedTests":32,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":11,"numTotalTests":34,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1756297991714,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Distributor Snapshot & FX Freeze (E2E)"],"duration":1,"failing":false,"failureDetails":[{"query":"INSERT INTO \"users\"(\"id\",\"tenantId\",\"role\",\"username\",\"email\",\"password\",\"isActive\") VALUES($1,$2,$3,$4,$5,$6,$7)","parameters":["00000000-0000-0000-0000-00000000ownr","00000000-0000-0000-0000-00000000t001","tenant_owner","owner","o@x","x",1],"driverError":{"errno":19,"code":"SQLITE_CONSTRAINT"},"errno":19,"code":"SQLITE_CONSTRAINT"}],"failureMessages":["QueryFailedError: SQLITE_CONSTRAINT: FOREIGN KEY constraint failed\n    at Statement.handler (C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\src\\driver\\sqlite\\SqliteQueryRunner.ts:133:29)"],"fullName":"Distributor Snapshot & FX Freeze (E2E) creates order with FX snapshot and Dist3 stays stable after FX change","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297995850,"status":"failed","title":"creates order with FX snapshot and Dist3 stays stable after FX change"},{"ancestorTitles":["Distributor Snapshot & FX Freeze (E2E)"],"duration":0,"failing":false,"failureDetails":[{"query":"INSERT INTO \"users\"(\"id\",\"tenantId\",\"role\",\"username\",\"email\",\"password\",\"isActive\") VALUES($1,$2,$3,$4,$5,$6,$7)","parameters":["00000000-0000-0000-0000-00000000ownr","00000000-0000-0000-0000-00000000t001","tenant_owner","owner","o@x","x",1],"driverError":{"errno":19,"code":"SQLITE_CONSTRAINT"},"errno":19,"code":"SQLITE_CONSTRAINT"}],"failureMessages":["QueryFailedError: SQLITE_CONSTRAINT: FOREIGN KEY constraint failed\n    at Statement.handler (C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\src\\driver\\sqlite\\SqliteQueryRunner.ts:133:29)"],"fullName":"Distributor Snapshot & FX Freeze (E2E) returns 422 after distributor price removal","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297995853,"status":"failed","title":"returns 422 after distributor price removal"}],"endTime":1756297995861,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDistributor Snapshot & FX Freeze (E2E) › creates order with FX snapshot and Dist3 stays stable after FX change\u001b[39m\u001b[22m\n\n    QueryFailedError: SQLITE_CONSTRAINT: FOREIGN KEY constraint failed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Statement.handler (\u001b[22m\u001b[2m../src/driver/sqlite/SqliteQueryRunner.ts\u001b[2m:133:29)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDistributor Snapshot & FX Freeze (E2E) › returns 422 after distributor price removal\u001b[39m\u001b[22m\n\n    QueryFailedError: SQLITE_CONSTRAINT: FOREIGN KEY constraint failed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Statement.handler (\u001b[22m\u001b[2m../src/driver/sqlite/SqliteQueryRunner.ts\u001b[2m:133:29)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\distributor-snapshot.e2e-spec.ts","startTime":1756297991955,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":141,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) bootstrap developer (idempotent)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297996828,"status":"passed","title":"bootstrap developer (idempotent)"},{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":155,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) login developer","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297996970,"status":"passed","title":"login developer"},{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":35,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) insert email verification token and verify","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297997126,"status":"passed","title":"insert email verification token and verify"},{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":58,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) seed password reset user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297997162,"status":"passed","title":"seed password reset user"},{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":65,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) login with old password (sanity)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297997221,"status":"passed","title":"login with old password (sanity)"},{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":20,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) request password reset (always ok)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297997286,"status":"passed","title":"request password reset (always ok)"},{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":90,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) perform password reset using inserted token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297997307,"status":"passed","title":"perform password reset using inserted token"},{"ancestorTitles":["Auth Email & Password Reset (e2e)"],"duration":60,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Email & Password Reset (e2e) login with new password (should succeed)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297997398,"status":"passed","title":"login with new password (should succeed)"}],"endTime":1756297997464,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\auth-email-reset.e2e-spec.ts","startTime":1756297995869,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Impersonation (e2e)"],"duration":21,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation (e2e) bootstrap developer (idempotent)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297998489,"status":"passed","title":"bootstrap developer (idempotent)"},{"ancestorTitles":["Impersonation (e2e)"],"duration":120,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Impersonation (e2e) login developer (global token)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297998511,"status":"passed","title":"login developer (global token)"}],"endTime":1756297998638,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\impersonation.e2e-spec.ts","startTime":1756297997470,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Passkeys (e2e, mocked)"],"duration":67,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Passkeys (e2e, mocked) login with password to get JWT for registration","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756297999570,"status":"passed","title":"login with password to get JWT for registration"},{"ancestorTitles":["Passkeys (e2e, mocked)"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Passkeys (e2e, mocked) get registration options","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1756297999638,"status":"passed","title":"get registration options"},{"ancestorTitles":["Passkeys (e2e, mocked)"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Passkeys (e2e, mocked) finish registration (mocked)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297999648,"status":"passed","title":"finish registration (mocked)"},{"ancestorTitles":["Passkeys (e2e, mocked)"],"duration":16,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Passkeys (e2e, mocked) get authentication options (may 404 if registration failed)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297999666,"status":"passed","title":"get authentication options (may 404 if registration failed)"},{"ancestorTitles":["Passkeys (e2e, mocked)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Passkeys (e2e, mocked) finish authentication (mocked)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756297999682,"status":"passed","title":"finish authentication (mocked)"}],"endTime":1756297999690,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\passkeys.e2e-spec.ts","startTime":1756297998643,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Errors (e2e)"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Errors (e2e) POST /api/dev/errors/ingest stores a frontend error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298000655,"status":"passed","title":"POST /api/dev/errors/ingest stores a frontend error"},{"ancestorTitles":["Errors (e2e)"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Errors (e2e) GET /api/dev/errors lists errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298000673,"status":"passed","title":"GET /api/dev/errors lists errors"}],"endTime":1756298000689,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\errors.e2e-spec.ts","startTime":1756297999697,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Product Image Fallback (e2e)"],"duration":34,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Product Image Fallback (e2e) exposes image fallback fields on /api/products list","invocations":1,"location":null,"numPassingAsserts":16,"retryReasons":[],"startAt":1756298001582,"status":"passed","title":"exposes image fallback fields on /api/products list"}],"endTime":1756298001623,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\product-image-fallback.e2e-spec.ts","startTime":1756298000695,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AppController (e2e)"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AppController (e2e) /api/health (GET)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756298002475,"status":"passed","title":"/api/health (GET)"},{"ancestorTitles":["AppController (e2e)"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AppController (e2e) /api/metrics (GET)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1756298002484,"status":"passed","title":"/api/metrics (GET)"},{"ancestorTitles":["AppController (e2e)"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AppController (e2e) /api/metrics (GET) with token (if enforced)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298002491,"status":"passed","title":"/api/metrics (GET) with token (if enforced)"}],"endTime":1756298002514,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\app.e2e-spec.ts","startTime":1756298001628,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin Product Image (e2e)"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Image (e2e) provisions tenant + product","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298003395,"status":"passed","title":"provisions tenant + product"},{"ancestorTitles":["Admin Product Image (e2e)"],"duration":21,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Image (e2e) rejects admin image mutation without auth","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1756298003402,"status":"passed","title":"rejects admin image mutation without auth"},{"ancestorTitles":["Admin Product Image (e2e)"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Image (e2e) sets custom image (admin)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298003424,"status":"passed","title":"sets custom image (admin)"},{"ancestorTitles":["Admin Product Image (e2e)"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Image (e2e) toggles back to catalog image","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298003447,"status":"passed","title":"toggles back to catalog image"},{"ancestorTitles":["Admin Product Image (e2e)"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Image (e2e) clears custom image","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298003466,"status":"passed","title":"clears custom image"}],"endTime":1756298003490,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\admin-product-image.e2e-spec.ts","startTime":1756298002519,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin Product Image Metrics (e2e)"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Image Metrics (e2e) GET /api/admin/products/image-metrics/latest (auth)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1756298004351,"status":"passed","title":"GET /api/admin/products/image-metrics/latest (auth)"},{"ancestorTitles":["Admin Product Image Metrics (e2e)"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Image Metrics (e2e) GET /api/admin/products/image-metrics/delta (auth)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298004364,"status":"passed","title":"GET /api/admin/products/image-metrics/delta (auth)"}],"endTime":1756298004376,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\admin-product-image-metrics.e2e-spec.ts","startTime":1756298003496,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Health (e2e)"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Health (e2e) /api/health returns status + meta","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298005290,"status":"passed","title":"/api/health returns status + meta"},{"ancestorTitles":["Health (e2e)"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Health (e2e) /api/ready returns db status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1756298005298,"status":"passed","title":"/api/ready returns db status"}],"endTime":1756298005309,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\health.e2e-spec.ts","startTime":1756298004382,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin Product Thumbnails (e2e)"],"duration":28,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Thumbnails (e2e) sets a custom image and generates thumbnails (URLs echo)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1756298006247,"status":"passed","title":"sets a custom image and generates thumbnails (URLs echo)"},{"ancestorTitles":["Admin Product Thumbnails (e2e)"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Admin Product Thumbnails (e2e) manual regeneration endpoint works (no-op when already present)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1756298006276,"status":"passed","title":"manual regeneration endpoint works (no-op when already present)"}],"endTime":1756298006296,"message":"","name":"C:\\Users\\LABED HAJ ALAYA\\Desktop\\watan\\backend\\test\\admin-product-thumbnails.e2e-spec.ts","startTime":1756298005316,"status":"passed","summary":""}],"wasInterrupted":false}
